# MySQL锁
```
1.什么是锁
2.为什么要用锁
3.锁的优势和劣势
4.锁类型
5.锁的粒度
6.显示锁
7.死锁
```

## 1.什么是锁
```
锁是计算机协调多个进程或线程并发访问某一资源的机制
```

## 2.为什么要用锁
```
为了保证数据的一致性
```

## 3.锁的优势和劣势
```
优势：保证数据的一致性
劣势：检测锁、加锁、释放锁需要额外的开销，牺牲了执行效率
```

## 4.锁类型
```
1.共享锁（读锁）
2.排他锁（写锁）
```

### 4.1.共享锁（读锁）
```
共享锁也称为读锁，读锁允许多个连接可以同一时刻并发的读取同一资源，互不干扰。
```

### 4.2.排他锁（写锁）
```
排他锁也称为写锁，一个写锁会阻塞其他的写锁和读锁，保证同一时刻只有一个连接可以写入数据。
同时防止其他用户对这个数据的读写。
```

## 5.锁的粒度
```
1.表锁
2.行锁
3.页面锁
```

### 5.1.表锁
```
特点: 开销小,加锁快; 不会出现死锁; 锁的粒度大, 发生锁冲突的概率最高, 并发最低

适用场景: 以查询为主, 只有少量按索引更新数据的应用
```

### 5.2.行锁
```
特点: 开销大,加锁慢;会出现死锁;锁的粒度最小,发生锁冲突的概率最低,并发也最高

适用场景: 适用于大量按索引条件并发更新少量不同数据,同时又有并发查询的应用
```


### 5.3.页面锁
```
特点: 开销和加锁时间界于表锁和行锁之间; 会出现死锁;并发度一般
```

## 6.显示锁

```
共享锁：select ... lock in share mode
排他锁：select ... for update
```